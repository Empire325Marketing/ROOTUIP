(function(){if('IntersectionObserver'in window){const config={rootMargin:'50px 0px',threshold:0.01};const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;const src=img.getAttribute('data-src');if(src){img.src=src;img.classList.remove('lazy');img.classList.add('loaded');img.removeAttribute('data-src');observer.unobserve(img);if(window.gtag){gtag('event','image_loaded',{event_category:'performance',event_label:src})}}else{img.classList.add('loaded');observer.unobserve(img)}}})},config);const lazyImages=document.querySelectorAll('img[data-src], img.lazy');lazyImages.forEach(img=>imageObserver.observe(img));const videoObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const video=entry.target;const src=video.getAttribute('data-src');if(src){video.src=src;video.removeAttribute('data-src');observer.unobserve(video)}else{video.play&&video.play();observer.unobserve(video)}}})},config);const lazyVideos=document.querySelectorAll('video[data-src], video.lazy');lazyVideos.forEach(video=>videoObserver.observe(video))}else{const lazyImages=document.querySelectorAll('img[data-src]');lazyImages.forEach(img=>{img.src=img.getAttribute('data-src');img.removeAttribute('data-src');img.classList.remove('lazy');img.classList.add('loaded')});const lazyVideos=document.querySelectorAll('video[data-src]');lazyVideos.forEach(video=>{video.src=video.getAttribute('data-src');video.removeAttribute('data-src')})}})();