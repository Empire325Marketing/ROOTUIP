<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROI Calculator - ROOTUIP Enterprise Platform</title>
    <meta name="description" content="Calculate your potential savings with ROOTUIP's AI-powered container tracking and detention/demurrage prevention system.">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <!-- HubSpot Tracking -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/YOUR_HUBSPOT_ID.js"></script>
    
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-shadow {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .result-animation {
            animation: slideUp 0.8s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .input-focus {
            transition: all 0.3s ease;
        }
        
        .input-focus:focus {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        
        .step {
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }
        
        .step.active {
            opacity: 1;
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
    <link rel="stylesheet" href="/assets/css/rootuip-dark-theme.css">
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <img src="/assets/rootuip-logo.png" alt="ROOTUIP" class="h-8 w-auto">
                    <span class="ml-3 text-xl font-bold text-gray-900">ROOTUIP</span>
                </div>
                <nav class="flex space-x-8">
                    <a href="/" class="text-gray-700 hover:text-blue-600">Home</a>
                    <a href="/platform" class="text-gray-700 hover:text-blue-600">Platform</a>
                    <a href="/case-studies" class="text-gray-700 hover:text-blue-600">Case Studies</a>
                    <a href="/contact" class="text-gray-700 hover:text-blue-600">Contact</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-16">
        <div class="max-w-4xl mx-auto text-center px-4">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">
                Calculate Your Container Management ROI
            </h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90">
                Discover how much ROOTUIP can save your company from detention and demurrage charges
            </p>
            <div class="bg-white bg-opacity-20 rounded-lg p-6 inline-block">
                <div class="flex items-center justify-center space-x-8 text-center">
                    <div>
                        <div class="text-3xl font-bold">$2.8M</div>
                        <div class="text-sm opacity-80">Average Annual Savings</div>
                    </div>
                    <div class="w-px h-12 bg-white opacity-30"></div>
                    <div>
                        <div class="text-3xl font-bold">847%</div>
                        <div class="text-sm opacity-80">Average ROI</div>
                    </div>
                    <div class="w-px h-12 bg-white opacity-30"></div>
                    <div>
                        <div class="text-3xl font-bold">6 Months</div>
                        <div class="text-sm opacity-80">Payback Period</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Progress Bar -->
    <div class="bg-white py-4">
        <div class="max-w-4xl mx-auto px-4">
            <div class="flex items-center space-x-4">
                <span class="text-sm font-medium text-gray-700">Progress:</span>
                <div class="flex-1 bg-gray-200 rounded-full h-2">
                    <div id="progressBar" class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                </div>
                <span id="progressText" class="text-sm font-medium text-gray-700">0%</span>
            </div>
        </div>
    </div>

    <!-- ROI Calculator -->
    <section class="py-16">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Input Form -->
                <div class="bg-white rounded-xl card-shadow p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-8">Calculate Your Savings</h2>
                    
                    <form id="roiForm" class="space-y-6">
                        <!-- Step 1: Company Information -->
                        <div class="step active" data-step="1">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">
                                <span class="bg-blue-600 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">1</span>
                                Company Information
                            </h3>
                            
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Company Name *</label>
                                    <input type="text" id="companyName" required 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., Fortune 500 Retailer">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Industry *</label>
                                    <select id="industry" required 
                                            class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">Select Industry</option>
                                        <option value="retail">Retail</option>
                                        <option value="manufacturing">Manufacturing</option>
                                        <option value="automotive">Automotive</option>
                                        <option value="pharmaceuticals">Pharmaceuticals</option>
                                        <option value="consumer_goods">Consumer Goods</option>
                                        <option value="electronics">Electronics</option>
                                        <option value="food_beverage">Food & Beverage</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Company Size *</label>
                                    <select id="companySize" required 
                                            class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">Select Size</option>
                                        <option value="fortune500">Fortune 500</option>
                                        <option value="enterprise">Enterprise (1000+ employees)</option>
                                        <option value="midmarket">Mid-market (100-999 employees)</option>
                                        <option value="small">Small Business (10-99 employees)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Annual Revenue</label>
                                    <select id="annualRevenue" 
                                            class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">Select Range</option>
                                        <option value="50000000000+">$50B+</option>
                                        <option value="10000000000-50000000000">$10B - $50B</option>
                                        <option value="1000000000-10000000000">$1B - $10B</option>
                                        <option value="100000000-1000000000">$100M - $1B</option>
                                        <option value="10000000-100000000">$10M - $100M</option>
                                        <option value="0-10000000">Under $10M</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Container Volume -->
                        <div class="step" data-step="2">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">
                                <span class="bg-blue-600 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">2</span>
                                Container Operations
                            </h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Annual Container Volume *</label>
                                    <input type="number" id="containerVolume" required min="1" 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., 45000">
                                    <p class="text-sm text-gray-600 mt-1">Number of containers handled per year</p>
                                </div>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Primary Trade Lanes</label>
                                        <select id="tradeLanes" 
                                                class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                            <option value="asia-us">Asia to US</option>
                                            <option value="europe-us">Europe to US</option>
                                            <option value="asia-europe">Asia to Europe</option>
                                            <option value="intra-asia">Intra-Asia</option>
                                            <option value="mixed">Mixed Routes</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Primary Carriers</label>
                                        <select id="primaryCarriers" 
                                                class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                            <option value="mixed">Multiple Carriers</option>
                                            <option value="maersk">Maersk</option>
                                            <option value="msc">MSC</option>
                                            <option value="cma">CMA CGM</option>
                                            <option value="hapag">Hapag-Lloyd</option>
                                            <option value="cosco">COSCO</option>
                                            <option value="evergreen">Evergreen</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Current Costs -->
                        <div class="step" data-step="3">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">
                                <span class="bg-blue-600 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">3</span>
                                Current D&D Costs
                            </h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Current Annual D&D Charges</label>
                                    <input type="number" id="currentCharges" min="0" 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., 15750000">
                                    <p class="text-sm text-gray-600 mt-1">Leave blank to use industry estimates</p>
                                </div>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">% of Containers with D&D</label>
                                        <input type="number" id="ddPercentage" min="0" max="100" 
                                               class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="e.g., 25">
                                        <p class="text-sm text-gray-600 mt-1">Percentage of containers that incur charges</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Average Cost per Incident</label>
                                        <input type="number" id="avgCostPerIncident" min="0" 
                                               class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="e.g., 1400">
                                        <p class="text-sm text-gray-600 mt-1">Average detention/demurrage cost per container</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Contact Information -->
                        <div class="step" data-step="4">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">
                                <span class="bg-blue-600 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">4</span>
                                Contact Information
                            </h3>
                            
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                                    <input type="text" id="contactName" required 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., Jennifer Martinez">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Job Title *</label>
                                    <input type="text" id="jobTitle" required 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., VP Supply Chain">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Business Email *</label>
                                    <input type="email" id="contactEmail" required 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., jennifer@company.com">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                    <input type="tel" id="contactPhone" 
                                           class="input-focus w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="e.g., (555) 123-4567">
                                </div>
                            </div>
                        </div>

                        <!-- Navigation Buttons -->
                        <div class="flex justify-between pt-6">
                            <button type="button" id="prevBtn" 
                                    class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors duration-200"
                                    style="display: none;">
                                Previous
                            </button>
                            <button type="button" id="nextBtn" 
                                    class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                                Next Step
                            </button>
                            <button type="submit" id="calculateBtn" 
                                    class="px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200"
                                    style="display: none;">
                                <i class="fas fa-calculator mr-2"></i>
                                Calculate ROI
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Results Panel -->
                <div class="bg-white rounded-xl card-shadow p-8">
                    <div id="resultsPlaceholder" class="text-center py-12">
                        <i class="fas fa-chart-line text-6xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-600 mb-2">Your ROI Results Will Appear Here</h3>
                        <p class="text-gray-500">Complete the form to see your potential savings with ROOTUIP</p>
                    </div>

                    <div id="resultsPanel" class="result-animation" style="display: none;">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Your ROI Analysis</h2>
                        
                        <!-- Key Metrics -->
                        <div class="grid grid-cols-2 gap-4 mb-8">
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <div class="text-2xl font-bold text-green-700" id="totalSavings">$0</div>
                                <div class="text-sm text-green-600">Annual Savings</div>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <div class="text-2xl font-bold text-blue-700" id="roiPercentage">0%</div>
                                <div class="text-sm text-blue-600">ROI</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                                <div class="text-2xl font-bold text-purple-700" id="paybackPeriod">0 months</div>
                                <div class="text-sm text-purple-600">Payback Period</div>
                            </div>
                            <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                <div class="text-2xl font-bold text-orange-700" id="preventionRate">85%</div>
                                <div class="text-sm text-orange-600">D&D Prevention</div>
                            </div>
                        </div>

                        <!-- Savings Breakdown -->
                        <div class="mb-8">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">Savings Breakdown</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                    <span class="text-gray-700">Detention Savings</span>
                                    <span class="font-semibold" id="detentionSavings">$0</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                    <span class="text-gray-700">Demurrage Savings</span>
                                    <span class="font-semibold" id="demurrageSavings">$0</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                    <span class="text-gray-700">Operational Efficiency</span>
                                    <span class="font-semibold" id="operationalSavings">$0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            <button onclick="scheduleDemo()" 
                                    class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200">
                                <i class="fas fa-calendar-alt mr-2"></i>
                                Schedule Executive Demo
                            </button>
                            <button onclick="downloadReport()" 
                                    class="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                <i class="fas fa-download mr-2"></i>
                                Download Full Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trust Indicators -->
    <section class="bg-gray-100 py-16">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-12">Trusted by Fortune 500 Companies</h2>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-8 opacity-60">
                <div class="flex items-center justify-center">
                    <img src="/assets/walmart-logo.png" alt="Walmart" class="h-12 w-auto">
                </div>
                <div class="flex items-center justify-center">
                    <img src="/assets/target-logo.png" alt="Target" class="h-12 w-auto">
                </div>
                <div class="flex items-center justify-center">
                    <img src="/assets/amazon-logo.png" alt="Amazon" class="h-12 w-auto">
                </div>
                <div class="flex items-center justify-center">
                    <img src="/assets/homedepot-logo.png" alt="Home Depot" class="h-12 w-auto">
                </div>
                <div class="flex items-center justify-center">
                    <img src="/assets/apple-logo.png" alt="Apple" class="h-12 w-auto">
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">ROOTUIP</h3>
                    <p class="text-gray-400">AI-powered container tracking and detention/demurrage prevention for Fortune 500 companies.</p>
                </div>
                <div>
                    <h4 class="text-md font-semibold mb-4">Platform</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="/features" class="hover:text-white">Features</a></li>
                        <li><a href="/integrations" class="hover:text-white">Integrations</a></li>
                        <li><a href="/security" class="hover:text-white">Security</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-md font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="/case-studies" class="hover:text-white">Case Studies</a></li>
                        <li><a href="/whitepapers" class="hover:text-white">Whitepapers</a></li>
                        <li><a href="/webinars" class="hover:text-white">Webinars</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-md font-semibold mb-4">Contact</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>sales@rootuip.com</li>
                        <li>1-800-ROOTUIP</li>
                        <li>support@rootuip.com</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 ROOTUIP. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Multi-step form logic
        let currentStep = 1;
        const totalSteps = 4;

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '%';
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.step').forEach(s => {
                s.classList.remove('active');
                s.style.display = 'none';
            });
            
            // Show current step
            const currentStepEl = document.querySelector(`[data-step="${step}"]`);
            if (currentStepEl) {
                currentStepEl.style.display = 'block';
                currentStepEl.classList.add('active');
            }
            
            // Update navigation buttons
            document.getElementById('prevBtn').style.display = step > 1 ? 'block' : 'none';
            document.getElementById('nextBtn').style.display = step < totalSteps ? 'block' : 'none';
            document.getElementById('calculateBtn').style.display = step === totalSteps ? 'block' : 'none';
            
            updateProgress();
        }

        function validateStep(step) {
            const stepEl = document.querySelector(`[data-step="${step}"]`);
            const requiredInputs = stepEl.querySelectorAll('[required]');
            
            for (let input of requiredInputs) {
                if (!input.value.trim()) {
                    input.focus();
                    input.classList.add('border-red-500');
                    setTimeout(() => input.classList.remove('border-red-500'), 3000);
                    return false;
                }
            }
            return true;
        }

        // Event listeners
        document.getElementById('nextBtn').addEventListener('click', () => {
            if (validateStep(currentStep)) {
                currentStep++;
                showStep(currentStep);
                
                // Track progress in analytics
                gtag('event', 'roi_calculator_step', {
                    'step': currentStep,
                    'step_name': `step_${currentStep}`
                });
            }
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            currentStep--;
            showStep(currentStep);
        });

        // Initialize
        showStep(1);

        // ROI Calculation Logic
        document.getElementById('roiForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!validateStep(currentStep)) return;
            
            const formData = {
                companyName: document.getElementById('companyName').value,
                industry: document.getElementById('industry').value,
                companySize: document.getElementById('companySize').value,
                annualRevenue: document.getElementById('annualRevenue').value,
                containerVolume: parseInt(document.getElementById('containerVolume').value),
                tradeLanes: document.getElementById('tradeLanes').value,
                primaryCarriers: document.getElementById('primaryCarriers').value,
                currentCharges: parseFloat(document.getElementById('currentCharges').value) || null,
                ddPercentage: parseFloat(document.getElementById('ddPercentage').value) || null,
                avgCostPerIncident: parseFloat(document.getElementById('avgCostPerIncident').value) || null,
                contactName: document.getElementById('contactName').value,
                jobTitle: document.getElementById('jobTitle').value,
                contactEmail: document.getElementById('contactEmail').value,
                contactPhone: document.getElementById('contactPhone').value
            };
            
            try {
                // Show loading state
                document.getElementById('calculateBtn').innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Calculating...';
                document.getElementById('calculateBtn').disabled = true;
                
                // Calculate ROI
                const results = calculateROI(formData);
                
                // Submit to backend
                await submitROICalculation(formData, results);
                
                // Display results
                displayResults(results);
                
                // Track conversion
                gtag('event', 'roi_calculation_complete', {
                    'company_size': formData.companySize,
                    'industry': formData.industry,
                    'annual_savings': results.totalSavings
                });
                
            } catch (error) {
                console.error('ROI calculation failed:', error);
                alert('Sorry, there was an error calculating your ROI. Please try again.');
            } finally {
                document.getElementById('calculateBtn').innerHTML = '<i class="fas fa-calculator mr-2"></i>Calculate ROI';
                document.getElementById('calculateBtn').disabled = false;
            }
        });

        function calculateROI(data) {
            // Industry multipliers
            const industryMultipliers = {
                retail: 1.3,
                manufacturing: 1.5,
                automotive: 1.7,
                pharmaceuticals: 1.8,
                consumer_goods: 1.2,
                electronics: 1.4,
                food_beverage: 1.1,
                other: 1.0
            };
            
            // Company size multipliers
            const sizeMultipliers = {
                fortune500: 3.2,
                enterprise: 1.8,
                midmarket: 1.0,
                small: 0.6
            };
            
            const industryMultiplier = industryMultipliers[data.industry] || 1.0;
            const sizeMultiplier = sizeMultipliers[data.companySize] || 1.0;
            
            // Calculate estimated current costs if not provided
            let estimatedCurrentCosts;
            if (data.currentCharges) {
                estimatedCurrentCosts = data.currentCharges;
            } else {
                // Industry average: $3,500 per container with D&D issues
                const baseAvgCost = 3500;
                const adjustedAvgCost = baseAvgCost * industryMultiplier * sizeMultiplier;
                const percentageWithDD = (data.ddPercentage || 25) / 100; // Default 25%
                estimatedCurrentCosts = data.containerVolume * percentageWithDD * adjustedAvgCost;
            }
            
            // ROOTUIP prevents 85% of D&D charges on average
            const preventionRate = 0.85;
            const totalSavings = estimatedCurrentCosts * preventionRate;
            
            // Break down savings
            const detentionSavings = totalSavings * 0.6; // 60% typically detention
            const demurrageSavings = totalSavings * 0.4; // 40% typically demurrage
            const operationalSavings = data.containerVolume * 500; // $500 per container operational savings
            
            // ROI calculation (assuming $100k annual investment)
            const annualInvestment = 100000;
            const totalBenefit = totalSavings + operationalSavings;
            const roiPercentage = ((totalBenefit - annualInvestment) / annualInvestment) * 100;
            const paybackPeriodMonths = Math.max(1, Math.round((annualInvestment / (totalBenefit / 12))));
            
            return {
                totalSavings: Math.round(totalSavings),
                detentionSavings: Math.round(detentionSavings),
                demurrageSavings: Math.round(demurrageSavings),
                operationalSavings: Math.round(operationalSavings),
                roiPercentage: Math.round(roiPercentage),
                paybackPeriodMonths,
                preventionRate: Math.round(preventionRate * 100),
                totalBenefit: Math.round(totalBenefit)
            };
        }

        async function submitROICalculation(formData, results) {
            const payload = {
                ...formData,
                ...results,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                referrer: document.referrer
            };
            
            // Submit to our backend
            const response = await fetch('/api/roi-calculations', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) {
                throw new Error('Failed to submit ROI calculation');
            }
            
            // HubSpot form submission
            if (window.hbspt) {
                window.hbspt.forms.create({
                    region: "na1",
                    portalId: "YOUR_HUBSPOT_ID",
                    formId: "YOUR_FORM_ID",
                    fields: [
                        { name: "company", value: formData.companyName },
                        { name: "email", value: formData.contactEmail },
                        { name: "firstname", value: formData.contactName.split(' ')[0] },
                        { name: "lastname", value: formData.contactName.split(' ').slice(1).join(' ') },
                        { name: "jobtitle", value: formData.jobTitle },
                        { name: "phone", value: formData.contactPhone },
                        { name: "annual_container_volume", value: formData.containerVolume.toString() },
                        { name: "estimated_annual_savings", value: results.totalSavings.toString() },
                        { name: "roi_percentage", value: results.roiPercentage.toString() }
                    ]
                });
            }
        }

        function displayResults(results) {
            document.getElementById('resultsPlaceholder').style.display = 'none';
            document.getElementById('resultsPanel').style.display = 'block';
            
            // Format numbers with commas
            const formatCurrency = (num) => new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(num);
            
            document.getElementById('totalSavings').textContent = formatCurrency(results.totalSavings);
            document.getElementById('roiPercentage').textContent = results.roiPercentage + '%';
            document.getElementById('paybackPeriod').textContent = results.paybackPeriodMonths + ' months';
            document.getElementById('preventionRate').textContent = results.preventionRate + '%';
            document.getElementById('detentionSavings').textContent = formatCurrency(results.detentionSavings);
            document.getElementById('demurrageSavings').textContent = formatCurrency(results.demurrageSavings);
            document.getElementById('operationalSavings').textContent = formatCurrency(results.operationalSavings);
        }

        function scheduleDemo() {
            gtag('event', 'demo_request', {
                'source': 'roi_calculator'
            });
            
            // Redirect to demo booking page
            window.location.href = '/schedule-demo?source=roi_calculator';
        }

        function downloadReport() {
            gtag('event', 'report_download', {
                'source': 'roi_calculator'
            });
            
            // Generate and download PDF report
            window.open('/api/roi-report/download', '_blank');
        }
    </script>
</body>
</html>