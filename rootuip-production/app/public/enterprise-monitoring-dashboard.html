<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROOTUIP Enterprise Monitoring Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="/assets/images/rootuip-logo.svg">
    <link rel="stylesheet" href="/assets/css/rootuip-design-system.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <style>
        /* Monitoring Dashboard Styles */
        .dashboard-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
            background: var(--rootuip-gray-50);
        }
        
        /* Sidebar */
        .dashboard-sidebar {
            background: var(--rootuip-gray-900);
            color: white;
            padding: var(--space-6);
            overflow-y: auto;
        }
        
        .dashboard-logo {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-8);
            font-size: var(--text-xl);
            font-weight: 700;
        }
        
        .nav-section {
            margin-bottom: var(--space-6);
        }
        
        .nav-title {
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            color: var(--rootuip-gray-400);
            margin-bottom: var(--space-3);
            letter-spacing: 0.05em;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-bottom: var(--space-1);
        }
        
        .nav-item:hover {
            background: var(--rootuip-gray-800);
        }
        
        .nav-item.active {
            background: var(--rootuip-primary);
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
        }
        
        /* Main Content */
        .dashboard-main {
            padding: var(--space-6);
            overflow-y: auto;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-8);
        }
        
        .dashboard-title {
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--rootuip-gray-900);
        }
        
        .dashboard-controls {
            display: flex;
            gap: var(--space-4);
        }
        
        .time-range-selector {
            padding: var(--space-2) var(--space-4);
            border: 1px solid var(--rootuip-border);
            border-radius: var(--radius-md);
            background: var(--bg-dark);
            font-size: var(--text-sm);
        }
        
        .refresh-button {
            padding: var(--space-2) var(--space-4);
            background: var(--rootuip-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--text-sm);
            transition: background var(--transition-fast);
        }
        
        .refresh-button:hover {
            background: var(--rootuip-primary-dark);
        }
        
        /* Status Overview */
        .status-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }
        
        .status-card {
            background: var(--bg-dark);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--rootuip-border);
        }
        
        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }
        
        .status-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--rootuip-gray-900);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--rootuip-success);
        }
        
        .status-indicator.warning {
            background: var(--rootuip-warning);
        }
        
        .status-indicator.critical {
            background: var(--rootuip-error);
        }
        
        .status-value {
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--rootuip-gray-900);
            margin-bottom: var(--space-2);
        }
        
        .status-change {
            font-size: var(--text-sm);
            color: var(--rootuip-gray-600);
        }
        
        .status-change.positive {
            color: var(--rootuip-success);
        }
        
        .status-change.negative {
            color: var(--rootuip-error);
        }
        
        /* Chart Container */
        .chart-container {
            background: var(--bg-dark);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--rootuip-border);
            margin-bottom: var(--space-6);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }
        
        .chart-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--rootuip-gray-900);
        }
        
        .chart-controls {
            display: flex;
            gap: var(--space-2);
        }
        
        .chart-control {
            padding: var(--space-1) var(--space-3);
            background: transparent;
            border: 1px solid var(--rootuip-border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--text-xs);
            transition: all var(--transition-fast);
        }
        
        .chart-control.active {
            background: var(--rootuip-primary);
            color: white;
            border-color: var(--rootuip-primary);
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        
        /* Alert Panel */
        .alert-panel {
            background: var(--bg-dark);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--rootuip-border);
            margin-bottom: var(--space-6);
        }
        
        .alert-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }
        
        .alert-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--rootuip-gray-900);
        }
        
        .alert-count {
            background: var(--rootuip-error);
            color: white;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 600;
        }
        
        .alert-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .alert-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            border: 1px solid var(--rootuip-border);
            margin-bottom: var(--space-2);
            transition: all var(--transition-fast);
        }
        
        .alert-item:hover {
            background: var(--rootuip-gray-50);
        }
        
        .alert-severity {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--rootuip-error);
        }
        
        .alert-severity.warning {
            background: var(--rootuip-warning);
        }
        
        .alert-severity.info {
            background: var(--rootuip-info);
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-message {
            font-weight: 500;
            color: var(--rootuip-gray-900);
            margin-bottom: var(--space-1);
        }
        
        .alert-time {
            font-size: var(--text-xs);
            color: var(--rootuip-gray-600);
        }
        
        .alert-actions {
            display: flex;
            gap: var(--space-2);
        }
        
        .alert-action {
            padding: var(--space-1) var(--space-2);
            background: transparent;
            border: 1px solid var(--rootuip-border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--text-xs);
            transition: all var(--transition-fast);
        }
        
        .alert-action:hover {
            background: var(--rootuip-gray-50);
        }
        
        /* Grid Layout for Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-6);
            margin-bottom: var(--space-6);
        }
        
        /* Service Status Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-4);
        }
        
        .service-card {
            background: var(--bg-dark);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            border: 1px solid var(--rootuip-border);
            transition: all var(--transition-fast);
        }
        
        .service-card:hover {
            box-shadow: var(--shadow-md);
        }
        
        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3);
        }
        
        .service-name {
            font-weight: 600;
            color: var(--rootuip-gray-900);
        }
        
        .service-status {
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: 500;
            background: var(--rootuip-success);
            color: white;
        }
        
        .service-status.degraded {
            background: var(--rootuip-warning);
        }
        
        .service-status.down {
            background: var(--rootuip-error);
        }
        
        .service-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-3);
        }
        
        .service-metric {
            text-align: center;
        }
        
        .metric-value {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--rootuip-gray-900);
        }
        
        .metric-label {
            font-size: var(--text-xs);
            color: var(--rootuip-gray-600);
            text-transform: uppercase;
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
            }
            
            .dashboard-sidebar {
                display: none;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Loading States */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 200px;
            color: var(--rootuip-gray-600);
        }
        
        .spinner {
            width: 24px;
            height: 24px;
            border: 2px solid var(--rootuip-gray-200);
            border-top: 2px solid var(--rootuip-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: var(--space-3);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <link rel="stylesheet" href="/assets/css/rootuip-dark-theme.css">
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <div class="dashboard-sidebar">
            <div class="dashboard-logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor">
                    <path d="M16 2L3 9v14l13 7 13-7V9L16 2z"/>
                </svg>
                ROOTUIP Monitor
            </div>
            
            <nav>
                <div class="nav-section">
                    <div class="nav-title">Overview</div>
                    <div class="nav-item active" data-view="overview">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                        Dashboard
                    </div>
                    <div class="nav-item" data-view="services">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        Services
                    </div>
                    <div class="nav-item" data-view="infrastructure">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 7v10a2 2 0 002 2h10a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v0z"/>
                        </svg>
                        Infrastructure
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-title">Applications</div>
                    <div class="nav-item" data-view="apm">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 102 0V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm2.5 7a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm3.5-1.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/>
                        </svg>
                        APM
                    </div>
                    <div class="nav-item" data-view="errors">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"/>
                        </svg>
                        Errors
                    </div>
                    <div class="nav-item" data-view="logs">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm2 2v8h10V6H5z"/>
                        </svg>
                        Logs
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-title">Business</div>
                    <div class="nav-item" data-view="metrics">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                        </svg>
                        Analytics
                    </div>
                    <div class="nav-item" data-view="users">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                        </svg>
                        Users
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-title">Alerts</div>
                    <div class="nav-item" data-view="alerts">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 2L3 7v11l7-5 7 5V7l-7-5z"/>
                        </svg>
                        Active Alerts
                    </div>
                    <div class="nav-item" data-view="incidents">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z"/>
                        </svg>
                        Incidents
                    </div>
                </div>
            </nav>
        </div>
        
        <!-- Main Content -->
        <div class="dashboard-main">
            <div class="dashboard-header">
                <h1 class="dashboard-title">System Overview</h1>
                <div class="dashboard-controls">
                    <select class="time-range-selector" id="timeRange">
                        <option value="1h">Last Hour</option>
                        <option value="24h" selected>Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                    </select>
                    <button class="refresh-button" onclick="refreshDashboard()">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"/>
                        </svg>
                        Refresh
                    </button>
                </div>
            </div>
            
            <!-- Status Overview -->
            <div class="status-overview">
                <div class="status-card">
                    <div class="status-header">
                        <h3 class="status-title">System Health</h3>
                        <div class="status-indicator" id="systemHealthIndicator"></div>
                    </div>
                    <div class="status-value" id="systemHealthValue">98.5%</div>
                    <div class="status-change positive" id="systemHealthChange">+0.2% from yesterday</div>
                </div>
                
                <div class="status-card">
                    <div class="status-header">
                        <h3 class="status-title">Active Users</h3>
                        <div class="status-indicator" id="activeUsersIndicator"></div>
                    </div>
                    <div class="status-value" id="activeUsersValue">1,247</div>
                    <div class="status-change positive" id="activeUsersChange">+12% from last hour</div>
                </div>
                
                <div class="status-card">
                    <div class="status-header">
                        <h3 class="status-title">Response Time</h3>
                        <div class="status-indicator" id="responseTimeIndicator"></div>
                    </div>
                    <div class="status-value" id="responseTimeValue">245ms</div>
                    <div class="status-change negative" id="responseTimeChange">+15ms from average</div>
                </div>
                
                <div class="status-card">
                    <div class="status-header">
                        <h3 class="status-title">Error Rate</h3>
                        <div class="status-indicator warning" id="errorRateIndicator"></div>
                    </div>
                    <div class="status-value" id="errorRateValue">0.12%</div>
                    <div class="status-change positive" id="errorRateChange">-0.03% from yesterday</div>
                </div>
            </div>
            
            <!-- Charts Grid -->
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Performance Metrics</h3>
                        <div class="chart-controls">
                            <button class="chart-control active" data-metric="response-time">Response Time</button>
                            <button class="chart-control" data-metric="throughput">Throughput</button>
                            <button class="chart-control" data-metric="errors">Errors</button>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
                
                <div class="alert-panel">
                    <div class="alert-header">
                        <h3 class="alert-title">Active Alerts</h3>
                        <span class="alert-count" id="alertCount">3</span>
                    </div>
                    <div class="alert-list" id="alertList">
                        <div class="alert-item">
                            <div class="alert-severity"></div>
                            <div class="alert-content">
                                <div class="alert-message">High CPU usage on web-server-01</div>
                                <div class="alert-time">2 minutes ago</div>
                            </div>
                            <div class="alert-actions">
                                <button class="alert-action">Ack</button>
                                <button class="alert-action">Resolve</button>
                            </div>
                        </div>
                        
                        <div class="alert-item">
                            <div class="alert-severity warning"></div>
                            <div class="alert-content">
                                <div class="alert-message">Database connection pool exhausted</div>
                                <div class="alert-time">5 minutes ago</div>
                            </div>
                            <div class="alert-actions">
                                <button class="alert-action">Ack</button>
                                <button class="alert-action">Resolve</button>
                            </div>
                        </div>
                        
                        <div class="alert-item">
                            <div class="alert-severity info"></div>
                            <div class="alert-content">
                                <div class="alert-message">New deployment completed successfully</div>
                                <div class="alert-time">12 minutes ago</div>
                            </div>
                            <div class="alert-actions">
                                <button class="alert-action">Dismiss</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Services Status -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Service Status</h3>
                </div>
                <div class="services-grid" id="servicesGrid">
                    <div class="service-card">
                        <div class="service-header">
                            <div class="service-name">API Gateway</div>
                            <div class="service-status">Healthy</div>
                        </div>
                        <div class="service-metrics">
                            <div class="service-metric">
                                <div class="metric-value">99.9%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                            <div class="service-metric">
                                <div class="metric-value">156ms</div>
                                <div class="metric-label">Avg Response</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-header">
                            <div class="service-name">Container Tracking</div>
                            <div class="service-status">Healthy</div>
                        </div>
                        <div class="service-metrics">
                            <div class="service-metric">
                                <div class="metric-value">99.8%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                            <div class="service-metric">
                                <div class="metric-value">312ms</div>
                                <div class="metric-label">Avg Response</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-header">
                            <div class="service-name">Authentication</div>
                            <div class="service-status">Healthy</div>
                        </div>
                        <div class="service-metrics">
                            <div class="service-metric">
                                <div class="metric-value">100%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                            <div class="service-metric">
                                <div class="metric-value">89ms</div>
                                <div class="metric-label">Avg Response</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-header">
                            <div class="service-name">Database</div>
                            <div class="service-status degraded">Degraded</div>
                        </div>
                        <div class="service-metrics">
                            <div class="service-metric">
                                <div class="metric-value">97.2%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                            <div class="service-metric">
                                <div class="metric-value">445ms</div>
                                <div class="metric-label">Avg Response</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Dashboard JavaScript
        class MonitoringDashboard {
            constructor() {
                this.charts = new Map();
                this.refreshInterval = null;
                this.currentView = 'overview';
                
                this.initializeCharts();
                this.setupEventListeners();
                this.startAutoRefresh();
                this.loadDashboardData();
            }
            
            initializeCharts() {
                this.createPerformanceChart();
            }
            
            createPerformanceChart() {
                const ctx = document.getElementById('performanceChart');
                if (!ctx) return;
                
                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: this.generateTimeLabels(),
                        datasets: [{
                            label: 'Response Time (ms)',
                            data: this.generateMockData(),
                            borderColor: '#1a73e8',
                            backgroundColor: 'rgba(26, 115, 232, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    display: false
                                }
                            },
                            y: {
                                beginAtZero: true,
                                grid: {
                                    borderDash: [2, 2]
                                }
                            }
                        },
                        elements: {
                            point: {
                                radius: 0,
                                hoverRadius: 6
                            }
                        }
                    }
                });
                
                this.charts.set('performance', chart);
            }
            
            generateTimeLabels() {
                const labels = [];
                const now = new Date();
                
                for (let i = 23; i >= 0; i--) {
                    const time = new Date(now.getTime() - (i * 60 * 60 * 1000));
                    labels.push(time.toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    }));
                }
                
                return labels;
            }
            
            generateMockData() {
                const data = [];
                const baseValue = 200;
                
                for (let i = 0; i < 24; i++) {
                    const variation = (Math.random() - 0.5) * 100;
                    const trend = Math.sin(i / 4) * 50;
                    data.push(Math.max(50, baseValue + variation + trend));
                }
                
                return data;
            }
            
            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        this.switchView(e.currentTarget.dataset.view);
                    });
                });
                
                // Chart controls
                document.querySelectorAll('.chart-control').forEach(control => {
                    control.addEventListener('click', (e) => {
                        this.switchMetric(e.currentTarget.dataset.metric);
                    });
                });
                
                // Time range selector
                document.getElementById('timeRange').addEventListener('change', (e) => {
                    this.changeTimeRange(e.target.value);
                });
                
                // Alert actions
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('alert-action')) {
                        this.handleAlertAction(e.target);
                    }
                });
            }
            
            switchView(view) {
                // Update active nav item
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-view="${view}"]`).classList.add('active');
                
                this.currentView = view;
                this.loadViewData(view);
            }
            
            switchMetric(metric) {
                // Update active control
                document.querySelectorAll('.chart-control').forEach(control => {
                    control.classList.remove('active');
                });
                document.querySelector(`[data-metric="${metric}"]`).classList.add('active');
                
                this.updatePerformanceChart(metric);
            }
            
            updatePerformanceChart(metric) {
                const chart = this.charts.get('performance');
                if (!chart) return;
                
                const datasets = {
                    'response-time': {
                        label: 'Response Time (ms)',
                        data: this.generateMockData(),
                        borderColor: '#1a73e8',
                        backgroundColor: 'rgba(26, 115, 232, 0.1)'
                    },
                    'throughput': {
                        label: 'Requests/sec',
                        data: this.generateMockData().map(v => v * 2),
                        borderColor: '#34a853',
                        backgroundColor: 'rgba(52, 168, 83, 0.1)'
                    },
                    'errors': {
                        label: 'Error Rate (%)',
                        data: this.generateMockData().map(v => Math.max(0, v / 100)),
                        borderColor: '#ea4335',
                        backgroundColor: 'rgba(234, 67, 53, 0.1)'
                    }
                };
                
                chart.data.datasets[0] = datasets[metric];
                chart.update();
            }
            
            changeTimeRange(range) {
                // Update chart labels and data based on time range
                const chart = this.charts.get('performance');
                if (!chart) return;
                
                chart.data.labels = this.generateTimeLabelsForRange(range);
                chart.data.datasets[0].data = this.generateMockDataForRange(range);
                chart.update();
            }
            
            generateTimeLabelsForRange(range) {
                const labels = [];
                const now = new Date();
                
                const ranges = {
                    '1h': { count: 60, interval: 60000, format: 'minute' },
                    '24h': { count: 24, interval: 3600000, format: 'hour' },
                    '7d': { count: 7, interval: 86400000, format: 'day' },
                    '30d': { count: 30, interval: 86400000, format: 'day' }
                };
                
                const config = ranges[range] || ranges['24h'];
                
                for (let i = config.count - 1; i >= 0; i--) {
                    const time = new Date(now.getTime() - (i * config.interval));
                    
                    if (config.format === 'minute') {
                        labels.push(time.toLocaleTimeString('en-US', { 
                            hour: '2-digit', 
                            minute: '2-digit' 
                        }));
                    } else if (config.format === 'hour') {
                        labels.push(time.toLocaleTimeString('en-US', { 
                            hour: '2-digit' 
                        }));
                    } else {
                        labels.push(time.toLocaleDateString('en-US', { 
                            month: 'short', 
                            day: 'numeric' 
                        }));
                    }
                }
                
                return labels;
            }
            
            generateMockDataForRange(range) {
                const counts = {
                    '1h': 60,
                    '24h': 24,
                    '7d': 7,
                    '30d': 30
                };
                
                const count = counts[range] || 24;
                const data = [];
                
                for (let i = 0; i < count; i++) {
                    data.push(Math.random() * 300 + 100);
                }
                
                return data;
            }
            
            handleAlertAction(button) {
                const alertItem = button.closest('.alert-item');
                const action = button.textContent;
                
                if (action === 'Ack' || action === 'Resolve' || action === 'Dismiss') {
                    alertItem.style.opacity = '0.5';
                    button.textContent = action === 'Ack' ? 'Acknowledged' : 'Resolved';
                    button.disabled = true;
                    
                    // Update alert count
                    const alertCount = document.getElementById('alertCount');
                    const currentCount = parseInt(alertCount.textContent);
                    alertCount.textContent = Math.max(0, currentCount - 1);
                }
            }
            
            loadViewData(view) {
                // Simulate loading different view data
                console.log(`Loading data for view: ${view}`);
            }
            
            loadDashboardData() {
                // Simulate real-time data updates
                this.updateStatusCards();
                this.updateAlerts();
                this.updateServices();
            }
            
            updateStatusCards() {
                // Simulate status updates
                const updates = {
                    systemHealth: Math.random() * 2 + 97,
                    activeUsers: Math.floor(Math.random() * 500 + 1000),
                    responseTime: Math.floor(Math.random() * 100 + 200),
                    errorRate: Math.random() * 0.5
                };
                
                document.getElementById('systemHealthValue').textContent = 
                    updates.systemHealth.toFixed(1) + '%';
                document.getElementById('activeUsersValue').textContent = 
                    updates.activeUsers.toLocaleString();
                document.getElementById('responseTimeValue').textContent = 
                    updates.responseTime + 'ms';
                document.getElementById('errorRateValue').textContent = 
                    updates.errorRate.toFixed(2) + '%';
            }
            
            updateAlerts() {
                // Real implementation would fetch from API
            }
            
            updateServices() {
                // Real implementation would fetch service status from API
            }
            
            startAutoRefresh() {
                this.refreshInterval = setInterval(() => {
                    this.loadDashboardData();
                }, 30000); // Refresh every 30 seconds
            }
            
            stopAutoRefresh() {
                if (this.refreshInterval) {
                    clearInterval(this.refreshInterval);
                    this.refreshInterval = null;
                }
            }
        }
        
        // Global functions
        function refreshDashboard() {
            dashboard.loadDashboardData();
            
            // Visual feedback
            const button = document.querySelector('.refresh-button');
            button.innerHTML = '<div class="spinner"></div>Refreshing...';
            
            setTimeout(() => {
                button.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"/>
                    </svg>
                    Refresh
                `;
            }, 1000);
        }
        
        // Initialize dashboard
        let dashboard;
        
        document.addEventListener('DOMContentLoaded', () => {
            dashboard = new MonitoringDashboard();
        });
        
        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (dashboard) {
                dashboard.stopAutoRefresh();
            }
        });
    </script>
</body>
</html>